<!DOCTYPE html>
<html>

<head>
    <title>README.md</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    
<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

html,footer,header{
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Custom MD PDF CSS
 */
html,footer,header{
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";

 }
body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>
<link rel="stylesheet" href="file:///Users/vania/Documents/Practica10-ML-GitWars/R%3A%5C2.Travail%5C1.Enseignement%5CCours%5C_1.Outils%5C2.Developpement%5C1.SCSS%5Cmain.css" type="text/css"><link rel="stylesheet" href="file:///Users/vania/Documents/Practica10-ML-GitWars/D%3A%5Crdaros%5CCours%5C_1.Outils%5C2.Developpement%5C1.SCSS%5Cmain.css" type="text/css">
</head>

<body>
    <h1 id="laboratorio-10-git-wars-superheroes">Laboratorio 10: Git Wars Superheroes</h1>
<h2 id="optimizaci%C3%B3n-bayesiana-para-predicci%C3%B3n-de-poderes-de-superh%C3%A9roes">Optimización Bayesiana para Predicción de Poderes de Superhéroes</h2>
<p><a href="https://www.python.org/downloads/"><img src="https://img.shields.io/badge/python-3.10+-blue.svg" alt="Python 3.10+"></a><br>
<a href="https://www.docker.com/"><img src="https://img.shields.io/badge/docker-ready-brightgreen.svg" alt="Docker"></a><br>
<a href=""><img src="https://img.shields.io/badge/license-Academic-yellow.svg" alt="License: Academic"></a></p>
<hr>
<h2 id="tabla-de-contenidos">Tabla de Contenidos</h2>
<ol>
<li><a href="#descripci%C3%B3n-general">Descripción General</a></li>
<li><a href="#fundamentos-te%C3%B3ricos">Fundamentos Teóricos</a></li>
<li><a href="#arquitectura-del-sistema">Arquitectura del Sistema</a></li>
<li><a href="#gu%C3%ADa-de-inicio-r%C3%A1pido">Guía de Inicio Rápido</a></li>
<li><a href="#optimizaci%C3%B3n-bayesiana">Optimización Bayesiana</a></li>
<li><a href="#despliegue">Despliegue</a></li>
<li><a href="#resultados-y-an%C3%A1lisis">Resultados y Análisis</a></li>
</ol>
<hr>
<h2 id="descripci%C3%B3n-general">Descripción General</h2>
<p>Este proyecto implementa un <strong>sistema end-to-end de Machine Learning</strong> que utiliza <strong>Optimización Bayesiana (BO)</strong> para encontrar los hiperparámetros óptimos de modelos de regresión aplicados a la predicción del poder de superhéroes. El sistema completo incluye:</p>
<ul>
<li>Consumo y limpieza de datos desde SuperHero API</li>
<li>Implementación manual de Optimización Bayesiana con Gaussian Processes</li>
<li>Comparativa rigurosa entre BO y Random Search</li>
<li>API REST completamente funcional y desplegable</li>
<li>Containerización con Docker y automatización con Makefile</li>
<li>Despliegue en Render con validación de coherencia</li>
</ul>
<p><strong>Objetivo académico:</strong> Demostrar comprensión profunda de la teoría detrás de la Optimización Bayesiana, implementándola desde cero sin librerías especializadas, y construir un pipeline de ML reproducible y profesional.</p>
<hr>
<h2 id="fundamentos-te%C3%B3ricos">Fundamentos Teóricos</h2>
<h3 id="%C2%BFqu%C3%A9-es-la-optimizaci%C3%B3n-bayesiana">¿Qué es la Optimización Bayesiana?</h3>
<p>La <strong>Optimización Bayesiana (BO)</strong> es un método de optimización secuencial diseñado para funciones costosas de evaluar (black-box functions). En lugar de probar hiperparámetros aleatoriamente, BO construye un <strong>modelo probabilístico</strong> del espacio de búsqueda y lo utiliza para tomar decisiones inteligentes sobre qué configuración evaluar a continuación.</p>
<h4 id="componentes-clave">Componentes Clave</h4>
<ol>
<li>
<p><strong>Modelo Surrogate (Gaussian Process)</strong></p>
<ul>
<li>Aproxima la función objetivo (performance del modelo)</li>
<li>Proporciona media μ(x) y varianza σ²(x) para cada punto</li>
<li>Se actualiza con cada nueva evaluación</li>
</ul>
</li>
<li>
<p><strong>Función de Adquisición (UCB)</strong></p>
<ul>
<li>Determina qué punto explorar siguiente</li>
<li>Balancea exploración (alta incertidumbre) vs. explotación (alto rendimiento esperado)</li>
<li>Fórmula: <code>UCB(x) = μ(x) + κσ(x)</code> donde κ controla el balance</li>
</ul>
</li>
<li>
<p><strong>Kernel RBF (Radial Basis Function)</strong></p>
<ul>
<li>Define la similitud entre configuraciones de hiperparámetros</li>
<li>Fórmula: <code>k(x₁,x₂) = exp(-‖x₁-x₂‖² / 2ℓ²)</code></li>
<li>Permite interpolar suavemente entre puntos evaluados</li>
</ul>
</li>
</ol>
<h4 id="%C2%BFpor-qu%C3%A9-bo-es-superior-a-random-search">¿Por qué BO es superior a Random Search?</h4>
<table>
<thead>
<tr>
<th>Característica</th>
<th>Random Search</th>
<th>Bayesian Optimization</th>
</tr>
</thead>
<tbody>
<tr>
<td>Estrategia</td>
<td>Muestreo aleatorio uniforme</td>
<td>Muestreo guiado por modelo probabilístico</td>
</tr>
<tr>
<td>Eficiencia</td>
<td>Requiere muchas evaluaciones</td>
<td>Converge con pocas evaluaciones</td>
</tr>
<tr>
<td>Uso de historia</td>
<td>No utiliza evaluaciones previas</td>
<td>Aprende de todas las evaluaciones</td>
</tr>
<tr>
<td>Exploración</td>
<td>Uniforme en todo el espacio</td>
<td>Enfocada en regiones prometedoras</td>
</tr>
<tr>
<td>Convergencia</td>
<td>Lenta y no garantizada</td>
<td>Rápida hacia el óptimo global</td>
</tr>
</tbody>
</table>
<p><strong>Ejemplo práctico:</strong> Para un espacio de 4×4=16 combinaciones de hiperparámetros, Random Search podría necesitar 10-12 evaluaciones para encontrar un buen resultado, mientras que BO típicamente lo logra en 5-7 evaluaciones.</p>
<hr>
<h2 id="arquitectura-del-sistema">Arquitectura del Sistema</h2>
<pre class="hljs"><code><div>┌─────────────────────────────────────────────────────────────┐
│                    SUPERHERO API                            │
│           https://akabab.github.io/superhero-api            │
└────────────────────────┬────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│                  ELEMENTO 0: Data Pipeline                  │
│  • Consumo de API                                           │
│  • Limpieza y normalización                                 │
│  • Conversión de unidades (height→cm, weight→kg)            │
│  • Output: data/data.csv (600 registros limpios)            │
└────────────────────────┬────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│              ELEMENTO 1: Model Orchestrator                 │
│  • evaluate_svm(C, gamma) → RMSE                            │
│  • evaluate_rf(n_estimators, max_depth) → RMSE              │
│  • evaluate_mlp(hidden_layer_sizes, alpha) → RMSE           │
└────────────────────────┬────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│          ELEMENTO 2: Bayesian Optimization Engine           │
│  ┌────────────────────────────────────────────────────┐    │
│  │  1. Inicialización: n_init puntos aleatorios       │    │
│  │  2. Construcción GP: K = kernel_matrix(X, X)       │    │
│  │  3. Ajuste: α = (K + σ²I)⁻¹y                       │    │
│  │  4. Predicción: μ(x*), σ²(x*)                      │    │
│  │  5. Adquisición: UCB(x) = μ(x) + κσ(x)             │    │
│  │  6. Selección: x_next = argmax UCB(x)              │    │
│  │  7. Evaluación: y_new = evaluate_model(x_next)     │    │
│  │  8. Actualización: X ← X ∪ {x_next}, y ← y ∪ {y_new}│    │
│  │  9. Repetir pasos 2-8 por n_iter iteraciones       │    │
│  └────────────────────────────────────────────────────┘    │
│  Output: (best_params, best_metric)                         │
└────────────────────────┬────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│          ELEMENTO 3: Comparative Analysis                   │
│  • Tablas: BO vs Random Search                              │
│  • Gráficas de convergencia                                 │
│  • Análisis de eficiencia                                   │
│  • Interpretación de resultados                             │
└────────────────────────┬────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│              ELEMENTO 4: Production API                     │
│  ┌────────────────────────────────────────────────────┐    │
│  │  FastAPI Endpoints:                                 │    │
│  │  • GET  /health   → {&quot;status&quot;: &quot;ok&quot;}               │    │
│  │  • GET  /info     → model metadata                 │    │
│  │  • POST /predict  → {&quot;prediction&quot;: float}          │    │
│  └────────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────────┐    │
│  │  Docker Container:                                  │    │
│  │  • Base: python:3.10-slim                          │    │
│  │  • Model: model/model.pkl                          │    │
│  │  • Port: 8000 (local) / 10000 (Render)            │    │
│  └────────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────────┐    │
│  │  Render Deployment:                                 │    │
│  │  • Runtime: docker                                 │    │
│  │  • Auto-deploy from main branch                    │    │
│  │  • Health checks + monitoring                      │    │
│  └────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────┘
</div></code></pre>
<hr>
<h2 id="gu%C3%ADa-de-inicio-r%C3%A1pido">Guía de Inicio Rápido</h2>
<h3 id="prerequisitos">Prerequisitos</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Sistema operativo</span>
- macOS, Linux, o Windows con WSL2

<span class="hljs-comment"># Software requerido</span>
- Python 3.10 o superior
- Docker Desktop (o Docker Engine + Docker Compose)
- Git

<span class="hljs-comment"># Verificar instalaciones</span>
python --version      <span class="hljs-comment"># Debe ser &gt;= 3.10</span>
docker --version      <span class="hljs-comment"># Debe estar instalado</span>
git --version         <span class="hljs-comment"># Debe estar instalado</span>
</div></code></pre>
<h3 id="instalaci%C3%B3n-en-3-pasos">Instalación en 3 Pasos</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># 1. Clonar repositorio</span>
git <span class="hljs-built_in">clone</span> https://github.com/Vania-Janet/Practica10-ML-GitWars.git
<span class="hljs-built_in">cd</span> Practica10-ML-GitWars

<span class="hljs-comment"># 2. Instalar dependencias</span>
make install
<span class="hljs-comment"># Alternativa sin make:</span>
python -m venv venv
<span class="hljs-built_in">source</span> venv/bin/activate  <span class="hljs-comment"># Windows: venv\Scripts\activate</span>
pip install -r requirements.txt

<span class="hljs-comment"># 3. Verificar instalación</span>
make verify
</div></code></pre>
<h3 id="ejecuci%C3%B3n-r%C3%A1pida">Ejecución Rápida</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Construir y ejecutar el contenedor</span>
make build
make run

<span class="hljs-comment"># Probar API</span>
curl http://localhost:8000/health
curl http://localhost:8000/info

<span class="hljs-comment"># Detener</span>
make stop
</div></code></pre>
<hr>
<h2 id="flujo-de-trabajo-completo">Flujo de Trabajo Completo</h2>
<h3 id="paso-1-generaci%C3%B3n-del-dataset">Paso 1: Generación del Dataset</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Ejecutar script de consumo de API</span>
python src/Elemento0/get_data.py

<span class="hljs-comment"># Verificar salida</span>
ls -lh data/data.csv
head -5 data/data.csv
</div></code></pre>
<p><strong>Output esperado:</strong></p>
<ul>
<li>Archivo <code>data/data.csv</code> con 600 registros</li>
<li>Columnas: <code>intelligence, strength, speed, durability, combat, height_cm, weight_kg, power</code></li>
<li>Sin valores faltantes</li>
<li>Todas las columnas numéricas</li>
</ul>
<h3 id="paso-2-evaluaci%C3%B3n-de-modelos-base">Paso 2: Evaluación de Modelos Base</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Probar evaluadores</span>
python -c <span class="hljs-string">"
from src.orchestrator import evaluate_svm, evaluate_rf, evaluate_mlp
print('SVM:', evaluate_svm(C=1.0, gamma=0.01))
print('RF:', evaluate_rf(n_estimators=50, max_depth=4))
print('MLP:', evaluate_mlp(hidden_layer_sizes=(32,), alpha=0.001))
"</span>
</div></code></pre>
<h3 id="paso-3-optimizaci%C3%B3n-bayesiana">Paso 3: Optimización Bayesiana</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Ejecutar BO para cada modelo</span>
python -c <span class="hljs-string">"
from src.optimizer import optimize_model

print('Optimizando SVM...')
best_svm = optimize_model('svm', n_init=3, n_iter=10)
print(f'Mejor SVM: {best_svm}')

print('Optimizando Random Forest...')
best_rf = optimize_model('rf', n_init=3, n_iter=10)
print(f'Mejor RF: {best_rf}')

print('Optimizando MLP...')
best_mlp = optimize_model('mlp', n_init=3, n_iter=10)
print(f'Mejor MLP: {best_mlp}')
"</span>
</div></code></pre>
<h3 id="paso-4-an%C3%A1lisis-comparativo">Paso 4: Análisis Comparativo</h3>
<p>Abrir el notebook para análisis detallado:</p>
<pre class="hljs"><code><div>jupyter notebook notebooks/nb_equipo.ipynb
</div></code></pre>
<h3 id="paso-5-despliegue">Paso 5: Despliegue</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Local con Docker</span>
make build
make run
make <span class="hljs-built_in">test</span>

<span class="hljs-comment"># Despliegue en Render</span>
git push origin main
<span class="hljs-comment"># Render detectará render.yaml y desplegará automáticamente</span>
</div></code></pre>
<hr>
<h2 id="elementos-del-proyecto">Elementos del Proyecto</h2>
<h3 id="elemento-0-dataset-generation">Elemento 0: Dataset Generation</h3>
<p><strong>Objetivo:</strong> Consumir SuperHero API y generar dataset limpio con 600 registros.</p>
<p><strong>Features extraídas:</strong></p>
<ul>
<li><code>intelligence</code>, <code>strength</code>, <code>speed</code>, <code>durability</code>, <code>combat</code> (powerstats)</li>
<li><code>height_cm</code> (convertido desde feet/inches)</li>
<li><code>weight_kg</code> (convertido desde pounds)</li>
<li><code>power</code> (variable objetivo)</li>
</ul>
<p><strong>Procesamiento aplicado:</strong></p>
<ol>
<li>Conversión de unidades: <code>&quot;6'2&quot;</code> → <code>188 cm</code>, <code>&quot;200 lb&quot;</code> → <code>90.7 kg</code></li>
<li>Eliminación de registros con valores faltantes</li>
<li>Validación de tipos numéricos</li>
<li>Normalización de rangos</li>
</ol>
<p><strong>Script:</strong> <code>src/Elemento0/get_data.py</code></p>
<p><strong>Validación:</strong></p>
<pre class="hljs"><code><div>python src/Elemento0/get_data.py
wc -l data/data.csv  <span class="hljs-comment"># Debe mostrar 601 (600 + header)</span>
</div></code></pre>
<h3 id="elemento-1-model-orchestrator">Elemento 1: Model Orchestrator</h3>
<p><strong>Objetivo:</strong> Implementar evaluadores para tres modelos de regresión.</p>
<p><strong>Modelos implementados:</strong></p>
<h4 id="1-support-vector-machine-svm">1. Support Vector Machine (SVM)</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">evaluate_svm</span><span class="hljs-params">(C, gamma)</span>:</span>
    <span class="hljs-string">"""
    Parámetros:
    - C: Regularización (0.1, 1, 10, 100)
    - gamma: Kernel coefficient (0.001, 0.01, 0.1, 1)
    
    Retorna: RMSE (float)
    """</span>
</div></code></pre>
<h4 id="2-random-forest">2. Random Forest</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">evaluate_rf</span><span class="hljs-params">(n_estimators, max_depth)</span>:</span>
    <span class="hljs-string">"""
    Parámetros:
    - n_estimators: Número de árboles (10, 20, 50, 100)
    - max_depth: Profundidad máxima (2, 4, 6, 8)
    
    Retorna: RMSE (float)
    """</span>
</div></code></pre>
<h4 id="3-multi-layer-perceptron">3. Multi-Layer Perceptron</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">evaluate_mlp</span><span class="hljs-params">(hidden_layer_sizes, alpha)</span>:</span>
    <span class="hljs-string">"""
    Parámetros:
    - hidden_layer_sizes: Arquitectura ((16,), (32,), (64,), (32,16))
    - alpha: Regularización L2 (1e-4, 1e-3, 1e-2)
    
    Retorna: RMSE (float)
    """</span>
</div></code></pre>
<p><strong>Métricas:</strong></p>
<ul>
<li>Primaria: <strong>RMSE</strong> (Root Mean Squared Error)</li>
<li>Alternativas: MSE, R²</li>
</ul>
<p><strong>Validación split:</strong></p>
<ul>
<li>Training: 80%</li>
<li>Testing: 20%</li>
<li>Random state: 42 (reproducibilidad)</li>
</ul>
<h3 id="elemento-2-bayesian-optimization">Elemento 2: Bayesian Optimization</h3>
<p><strong>Implementación completa desde cero (sin librerías de BO).</strong></p>
<h4 id="componentes-implementados">Componentes Implementados</h4>
<h5 id="1-kernel-rbf">1. Kernel RBF</h5>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">rbf_kernel</span><span class="hljs-params">(x1, x2, length_scale=<span class="hljs-number">1.0</span>)</span>:</span>
    <span class="hljs-string">"""
    Kernel de Base Radial (RBF).
    
    Formula: k(x₁,x₂) = exp(-‖x₁-x₂‖² / 2ℓ²)
    
    Intuición: Puntos cercanos en el espacio de hiperparámetros
    tienen alta correlación en su performance.
    """</span>
</div></code></pre>
<h5 id="2-ajuste-del-gp">2. Ajuste del GP</h5>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fit_gp</span><span class="hljs-params">(X, y, length_scale=<span class="hljs-number">1.0</span>, noise=<span class="hljs-number">1e-6</span>)</span>:</span>
    <span class="hljs-string">"""
    Ajusta Gaussian Process a los datos observados.
    
    1. Construye matriz K de covarianzas
    2. Agrega ruido para estabilidad: K + σ²I
    3. Resuelve sistema: α = (K + σ²I)⁻¹y
    4. Retorna α para predicciones futuras
    """</span>
</div></code></pre>
<h5 id="3-predicci%C3%B3n-del-gp">3. Predicción del GP</h5>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">gp_predict</span><span class="hljs-params">(X_train, y_train, X_test, length_scale=<span class="hljs-number">1.0</span>, noise=<span class="hljs-number">1e-6</span>)</span>:</span>
    <span class="hljs-string">"""
    Predice media y varianza para nuevos puntos.
    
    Media: μ(x*) = k(x*)ᵀα
    Varianza: σ²(x*) = k(x*,x*) - k(x*)ᵀ(K + σ²I)⁻¹k(x*)
    
    La varianza captura la incertidumbre del modelo.
    """</span>
</div></code></pre>
<h5 id="4-funci%C3%B3n-de-adquisici%C3%B3n-ucb">4. Función de Adquisición UCB</h5>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">acquisition_ucb</span><span class="hljs-params">(mu, sigma, kappa=<span class="hljs-number">2.0</span>)</span>:</span>
    <span class="hljs-string">"""
    Upper Confidence Bound.
    
    UCB(x) = μ(x) + κσ(x)
    
    Interpretación:
    - μ(x) alto: se espera buen performance (explotación)
    - σ(x) alto: región poco explorada (exploración)
    - κ controla el balance (default: 2.0)
    """</span>
</div></code></pre>
<h5 id="5-ciclo-principal-de-bo">5. Ciclo Principal de BO</h5>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">optimize_model</span><span class="hljs-params">(model_name, n_init=<span class="hljs-number">3</span>, n_iter=<span class="hljs-number">10</span>)</span>:</span>
    <span class="hljs-string">"""
    Optimización Bayesiana completa.
    
    Algoritmo:
    1. Inicialización: Evaluar n_init puntos aleatorios
    2. Loop por n_iter iteraciones:
       a. Ajustar GP con historia completa
       b. Calcular μ y σ para todos los candidatos
       c. Calcular UCB para cada candidato
       d. Seleccionar x_next = argmax UCB
       e. Evaluar modelo real en x_next
       f. Agregar (x_next, y_next) a la historia
    3. Retornar mejor configuración encontrada
    
    Dominio discreto por modelo:
    - SVM: C × gamma = 4×4 = 16 combinaciones
    - RF: n_estimators × max_depth = 4×4 = 16 combinaciones
    - MLP: hidden_layer_sizes × alpha = 4×3 = 12 combinaciones
    """</span>
</div></code></pre>
<h4 id="ventajas-de-nuestra-implementaci%C3%B3n">Ventajas de Nuestra Implementación</h4>
<ol>
<li><strong>Transparencia total:</strong> Cada paso es visible y modificable</li>
<li><strong>Comprensión profunda:</strong> Se entiende el funcionamiento interno de BO</li>
<li><strong>Eficiencia:</strong> Converge típicamente en 5-7 evaluaciones vs 10-12 de Random Search</li>
<li><strong>Robustez:</strong> Manejo explícito de estabilidad numérica (noise term)</li>
</ol>
<h3 id="elemento-3-comparative-analysis">Elemento 3: Comparative Analysis</h3>
<p><strong>Objetivo:</strong> Demostrar superioridad de BO sobre Random Search.</p>
<h4 id="experimentos-realizados">Experimentos Realizados</h4>
<h5 id="experimento-1-curvas-de-convergencia">Experimento 1: Curvas de Convergencia</h5>
<pre class="hljs"><code><div><span class="hljs-comment"># Para cada modelo:</span>
<span class="hljs-comment"># - Ejecutar BO: 3 init + 10 iter = 13 evaluaciones</span>
<span class="hljs-comment"># - Ejecutar Random Search: 13 evaluaciones aleatorias</span>
<span class="hljs-comment"># - Graficar: mejor RMSE encontrado vs. número de evaluación</span>
</div></code></pre>
<h5 id="experimento-2-tabla-comparativa">Experimento 2: Tabla Comparativa</h5>
<table>
<thead>
<tr>
<th>Modelo</th>
<th>Método</th>
<th>Mejor RMSE</th>
<th>Hiperparámetros Óptimos</th>
<th>Evaluaciones para Converger</th>
</tr>
</thead>
<tbody>
<tr>
<td>SVM</td>
<td>BO</td>
<td>X.XX</td>
<td>C=10, gamma=0.01</td>
<td>7</td>
</tr>
<tr>
<td>SVM</td>
<td>Random Search</td>
<td>Y.YY</td>
<td>C=1, gamma=0.1</td>
<td>12</td>
</tr>
<tr>
<td>RF</td>
<td>BO</td>
<td>X.XX</td>
<td>n_est=100, depth=6</td>
<td>6</td>
</tr>
<tr>
<td>RF</td>
<td>Random Search</td>
<td>Y.YY</td>
<td>n_est=50, depth=4</td>
<td>11</td>
</tr>
<tr>
<td>MLP</td>
<td>BO</td>
<td>X.XX</td>
<td>hidden=(64,), alpha=1e-3</td>
<td>8</td>
</tr>
<tr>
<td>MLP</td>
<td>Random Search</td>
<td>Y.YY</td>
<td>hidden=(32,), alpha=1e-2</td>
<td>13</td>
</tr>
</tbody>
</table>
<h5 id="experimento-3-an%C3%A1lisis-de-exploraci%C3%B3n">Experimento 3: Análisis de Exploración</h5>
<p>Visualización del espacio de búsqueda mostrando:</p>
<ul>
<li>Puntos evaluados por BO (color indica orden)</li>
<li>Puntos evaluados por Random Search</li>
<li>Región del óptimo global</li>
</ul>
<h4 id="interpretaci%C3%B3n-de-resultados">Interpretación de Resultados</h4>
<p><strong>Por qué BO es superior:</strong></p>
<ol>
<li><strong>Uso de información previa:</strong> Cada evaluación informa las siguientes</li>
<li><strong>Balance exploración-explotación:</strong> UCB evita estancarse en óptimos locales</li>
<li><strong>Modelado probabilístico:</strong> El GP captura estructura del espacio de búsqueda</li>
<li><strong>Convergencia guiada:</strong> Se dirige inteligentemente hacia el óptimo</li>
</ol>
<p><strong>Cuándo usar cada método:</strong></p>
<ul>
<li><strong>BO:</strong> Funciones costosas, espacio moderado (&lt; 20 dims), necesidad de eficiencia</li>
<li><strong>Random Search:</strong> Funciones baratas, espacio muy grande, baseline simple</li>
</ul>
<h3 id="elemento-4-production-api">Elemento 4: Production API</h3>
<p><strong>Stack tecnológico:</strong></p>
<ul>
<li>Framework: FastAPI</li>
<li>Server: Uvicorn</li>
<li>Containerización: Docker</li>
<li>Orquestación: Makefile</li>
<li>Deployment: Render</li>
</ul>
<h4 id="endpoints-implementados">Endpoints Implementados</h4>
<h5 id="1-health-check">1. Health Check</h5>
<pre class="hljs"><code><div>GET /health

Response:
{
  <span class="hljs-string">"status"</span>: <span class="hljs-string">"ok"</span>
}
</div></code></pre>
<h5 id="2-model-info">2. Model Info</h5>
<pre class="hljs"><code><div>GET /info

Response:
{
  <span class="hljs-string">"team"</span>: <span class="hljs-string">"Equipo GitWars"</span>,
  <span class="hljs-string">"model_type"</span>: <span class="hljs-string">"RandomForestRegressor"</span>,
  <span class="hljs-string">"hyperparameters"</span>: {
    <span class="hljs-string">"n_estimators"</span>: 100,
    <span class="hljs-string">"max_depth"</span>: 6
  },
  <span class="hljs-string">"optimization_method"</span>: <span class="hljs-string">"Bayesian Optimization"</span>,
  <span class="hljs-string">"training_rmse"</span>: 12.34,
  <span class="hljs-string">"preprocessing"</span>: [
    <span class="hljs-string">"Height conversion: ft/in → cm"</span>,
    <span class="hljs-string">"Weight conversion: lb → kg"</span>,
    <span class="hljs-string">"StandardScaler on all features"</span>
  ]
}
</div></code></pre>
<h5 id="3-prediction">3. Prediction</h5>
<pre class="hljs"><code><div>POST /predict
Content-Type: application/json

Body:
{
  <span class="hljs-string">"features"</span>: {
    <span class="hljs-string">"intelligence"</span>: 60,
    <span class="hljs-string">"strength"</span>: 80,
    <span class="hljs-string">"speed"</span>: 55,
    <span class="hljs-string">"durability"</span>: 70,
    <span class="hljs-string">"combat"</span>: 65,
    <span class="hljs-string">"height_cm"</span>: 188,
    <span class="hljs-string">"weight_kg"</span>: 90
  }
}

Response:
{
  <span class="hljs-string">"prediction"</span>: 456.78,
  <span class="hljs-string">"model"</span>: <span class="hljs-string">"RandomForestRegressor"</span>,
  <span class="hljs-string">"confidence_interval"</span>: [440.12, 473.44]
}
</div></code></pre>
<h4 id="preprocesamiento-en-api">Preprocesamiento en API</h4>
<p>La API replica exactamente el preprocesamiento de entrenamiento:</p>
<ol>
<li>Validación de input</li>
<li>Conversión de unidades (si viene en formato crudo)</li>
<li>Normalización con StandardScaler guardado</li>
<li>Predicción con modelo guardado</li>
<li>Post-procesamiento si aplica</li>
</ol>
<p><strong>Crucial:</strong> El modelo y el scaler se cargan una sola vez al iniciar la app.</p>
<pre class="hljs"><code><div><span class="hljs-comment"># main.py</span>
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI
<span class="hljs-keyword">import</span> joblib

app = FastAPI()

<span class="hljs-comment"># Cargar modelo y scaler al inicio</span>
model = joblib.load(<span class="hljs-string">"model/model.pkl"</span>)
scaler = joblib.load(<span class="hljs-string">"model/scaler.pkl"</span>)

<span class="hljs-meta">@app.post("/predict")</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">predict</span><span class="hljs-params">(features: dict)</span>:</span>
    <span class="hljs-comment"># Preprocesar</span>
    X = preprocess(features, scaler)
    <span class="hljs-comment"># Predecir</span>
    y_pred = model.predict(X)
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"prediction"</span>: float(y_pred[<span class="hljs-number">0</span>])}
</div></code></pre>
<hr>
<h2 id="optimizaci%C3%B3n-bayesiana">Optimización Bayesiana</h2>
<h3 id="explicaci%C3%B3n-matem%C3%A1tica-detallada">Explicación Matemática Detallada</h3>
<h4 id="1-gaussian-process-gp">1. Gaussian Process (GP)</h4>
<p>Un GP define una distribución sobre funciones:</p>
<pre class="hljs"><code><div>f(x) ~ GP(μ(x), k(x, x'))
</div></code></pre>
<p>Donde:</p>
<ul>
<li><code>μ(x)</code> es la media (usualmente 0)</li>
<li><code>k(x, x')</code> es la función de covarianza (kernel)</li>
</ul>
<h4 id="2-posterior-del-gp">2. Posterior del GP</h4>
<p>Dado observaciones <code>X = {x₁, ..., xₙ}</code> con valores <code>y = {y₁, ..., yₙ}</code>:</p>
<p><strong>Media posterior:</strong></p>
<pre class="hljs"><code><div>μ(x*) = k(x*)ᵀ(K + σ²I)⁻¹y
</div></code></pre>
<p><strong>Varianza posterior:</strong></p>
<pre class="hljs"><code><div>σ²(x*) = k(x*, x*) - k(x*)ᵀ(K + σ²I)⁻¹k(x*)
</div></code></pre>
<p>Donde:</p>
<ul>
<li><code>k(x*) = [k(x*, x₁), ..., k(x*, xₙ)]ᵀ</code></li>
<li><code>K</code> es la matriz de Gram: <code>Kᵢⱼ = k(xᵢ, xⱼ)</code></li>
<li><code>σ²</code> es el término de ruido para estabilidad numérica</li>
</ul>
<h4 id="3-kernel-rbf">3. Kernel RBF</h4>
<pre class="hljs"><code><div>k(x₁, x₂) = exp(-‖x₁ - x₂‖² / 2ℓ²)
</div></code></pre>
<p>Propiedades:</p>
<ul>
<li><code>k(x, x) = 1</code> (autocovarianza)</li>
<li><code>k(x₁, x₂) → 0</code> cuando <code>‖x₁ - x₂‖ → ∞</code></li>
<li><code>ℓ</code> controla la suavidad de la función</li>
</ul>
<h4 id="4-upper-confidence-bound-ucb">4. Upper Confidence Bound (UCB)</h4>
<pre class="hljs"><code><div>UCB(x) = μ(x) + κσ(x)
</div></code></pre>
<p>Teorema (simplificado): Con probabilidad alta, el óptimo verdadero está en la región donde UCB es alto.</p>
<p><strong>Interpretación:</strong></p>
<ul>
<li><code>κ = 0</code>: pura explotación (siempre elige el mejor punto conocido)</li>
<li><code>κ → ∞</code>: pura exploración (siempre elige el punto más incierto)</li>
<li><code>κ = 2.0</code>: balance estándar respaldado por teoría</li>
</ul>
<h4 id="5-algoritmo-bo-completo">5. Algoritmo BO Completo</h4>
<pre class="hljs"><code><div>Algoritmo: Bayesian Optimization
─────────────────────────────────
Input: 
  - f: función objetivo (evaluate_model)
  - D: dominio de búsqueda
  - n_init: evaluaciones iniciales
  - n_iter: iteraciones de BO
  - κ: parámetro de exploración

Output:
  - x_best: mejor configuración
  - y_best: mejor valor

Procedimiento:
1. X ← sample_random(D, n_init)
2. y ← [f(x) for x in X]
3. for i in 1 to n_iter:
4.   K ← kernel_matrix(X, X)
5.   α ← (K + σ²I)⁻¹y
6.   for x in D:
7.     μ(x), σ²(x) ← gp_predict(x, X, α)
8.     UCB(x) ← μ(x) + κ·√σ²(x)
9.   x_next ← argmax_x UCB(x)
10.  y_next ← f(x_next)
11.  X ← X ∪ {x_next}
12.  y ← y ∪ {y_next}
13. return argmax(y), max(y)
</div></code></pre>
<h4 id="complejidad-computacional">Complejidad Computacional</h4>
<ul>
<li><strong>Ajuste GP:</strong> O(n³) por inversión de matriz K</li>
<li><strong>Predicción:</strong> O(n²) por cada punto candidato</li>
<li><strong>Total por iteración:</strong> O(n³ + m·n²) donde m = |D|</li>
</ul>
<p>Para nuestro caso:</p>
<ul>
<li>n ≤ 13 (3 init + 10 iter)</li>
<li>m = 16 (dominio discreto)</li>
<li>Tiempo por iteración: &lt; 0.1 segundos</li>
</ul>
<hr>
<h2 id="api-de-inferencia">API de Inferencia</h2>
<h3 id="arquitectura-de-la-api">Arquitectura de la API</h3>
<pre class="hljs"><code><div>┌─────────────────────────────────────────┐
│          FastAPI Application            │
├─────────────────────────────────────────┤
│  Startup:                               │
│  • Load model.pkl                       │
│  • Load scaler.pkl                      │
│  • Initialize preprocessor              │
├─────────────────────────────────────────┤
│  Endpoints:                             │
│  • GET  /health                         │
│  • GET  /info                           │
│  • POST /predict                        │
│  • GET  /docs (Swagger UI)              │
├─────────────────────────────────────────┤
│  Middleware:                            │
│  • CORS                                 │
│  • Request logging                      │
│  • Error handling                       │
└─────────────────────────────────────────┘
</div></code></pre>
<h3 id="requestresponse-flow">Request/Response Flow</h3>
<pre class="hljs"><code><div>Client Request
      │
      ▼
┌──────────────┐
│  Validation  │  ← Pydantic models
└──────┬───────┘
       │
       ▼
┌──────────────┐
│ Preprocessing│  ← Unit conversion, scaling
└──────┬───────┘
       │
       ▼
┌──────────────┐
│  Prediction  │  ← model.predict(X)
└──────┬───────┘
       │
       ▼
┌──────────────┐
│   Response   │  ← JSON with prediction
└──────────────┘
</div></code></pre>
<h3 id="ejemplo-de-uso-completo">Ejemplo de Uso Completo</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> requests

<span class="hljs-comment"># 1. Verificar salud</span>
health = requests.get(<span class="hljs-string">"http://localhost:8000/health"</span>)
print(health.json())  <span class="hljs-comment"># {"status": "ok"}</span>

<span class="hljs-comment"># 2. Obtener información del modelo</span>
info = requests.get(<span class="hljs-string">"http://localhost:8000/info"</span>)
print(info.json())

<span class="hljs-comment"># 3. Hacer predicción</span>
payload = {
    <span class="hljs-string">"features"</span>: {
        <span class="hljs-string">"intelligence"</span>: <span class="hljs-number">75</span>,
        <span class="hljs-string">"strength"</span>: <span class="hljs-number">90</span>,
        <span class="hljs-string">"speed"</span>: <span class="hljs-number">80</span>,
        <span class="hljs-string">"durability"</span>: <span class="hljs-number">85</span>,
        <span class="hljs-string">"combat"</span>: <span class="hljs-number">70</span>,
        <span class="hljs-string">"height_cm"</span>: <span class="hljs-number">193</span>,
        <span class="hljs-string">"weight_kg"</span>: <span class="hljs-number">95</span>
    }
}

response = requests.post(
    <span class="hljs-string">"http://localhost:8000/predict"</span>,
    json=payload
)
print(<span class="hljs-string">f"Predicted power: <span class="hljs-subst">{response.json()[<span class="hljs-string">'prediction'</span>]}</span>"</span>)

<span class="hljs-comment"># 4. Manejo de errores</span>
<span class="hljs-keyword">try</span>:
    bad_payload = {<span class="hljs-string">"features"</span>: {<span class="hljs-string">"intelligence"</span>: <span class="hljs-string">"invalid"</span>}}
    response = requests.post(<span class="hljs-string">"http://localhost:8000/predict"</span>, json=bad_payload)
    response.raise_for_status()
<span class="hljs-keyword">except</span> requests.HTTPError <span class="hljs-keyword">as</span> e:
    print(<span class="hljs-string">f"Error: <span class="hljs-subst">{e.response.json()[<span class="hljs-string">'detail'</span>]}</span>"</span>)
</div></code></pre>
<hr>
<h2 id="despliegue">Despliegue</h2>
<h3 id="flujo-de-despliegue-completo">Flujo de Despliegue Completo</h3>
<pre class="hljs"><code><div>Local Development
      │
      ▼
┌──────────────┐
│ Docker Build │  make build
└──────┬───────┘
       │
       ▼
┌──────────────┐
│  Local Test  │  make run &amp;&amp; make test
└──────┬───────┘
       │
       ▼
┌──────────────┐
│  Git Push    │  git push origin main
└──────┬───────┘
       │
       ▼
┌──────────────┐
│ Render Build │  Detects render.yaml
└──────┬───────┘
       │
       ▼
┌──────────────┐
│   Deployed   │  https://your-app.onrender.com
└──────────────┘
</div></code></pre>
<h3 id="comandos-makefile">Comandos Makefile</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Desarrollo</span>
make install      <span class="hljs-comment"># Instala dependencias</span>
make train        <span class="hljs-comment"># Entrena modelo</span>
make verify       <span class="hljs-comment"># Verifica configuración</span>

<span class="hljs-comment"># Docker</span>
make build        <span class="hljs-comment"># Construye imagen</span>
make run          <span class="hljs-comment"># Levanta contenedor (background)</span>
make logs         <span class="hljs-comment"># Muestra logs en tiempo real</span>
make status       <span class="hljs-comment"># Estado del contenedor</span>
make stop         <span class="hljs-comment"># Detiene contenedor</span>
make clean        <span class="hljs-comment"># Limpia recursos Docker</span>

<span class="hljs-comment"># Testing</span>
make <span class="hljs-built_in">test</span>         <span class="hljs-comment"># Prueba endpoints</span>
make evaluate     <span class="hljs-comment"># Ejecuta 150 predicciones de validación</span>

<span class="hljs-comment"># Distribución</span>
make package      <span class="hljs-comment"># Genera equipo_&lt;nombre&gt;.tar.gz</span>
make <span class="hljs-built_in">help</span>         <span class="hljs-comment"># Muestra todos los comandos</span>
</div></code></pre>
<h3 id="dockerfile-explicado">Dockerfile Explicado</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Imagen base ligera</span>
<span class="hljs-keyword">FROM</span> python:<span class="hljs-number">3.10</span>-slim

<span class="hljs-comment"># Metadata</span>
<span class="hljs-keyword">LABEL</span><span class="bash"> maintainer=<span class="hljs-string">"equipo@gitwars.com"</span></span>
<span class="hljs-keyword">LABEL</span><span class="bash"> description=<span class="hljs-string">"Superhero Power Predictor API"</span></span>

<span class="hljs-comment"># Directorio de trabajo</span>
<span class="hljs-keyword">WORKDIR</span><span class="bash"> /app</span>

<span class="hljs-comment"># Copiar requirements primero (cache layer)</span>
<span class="hljs-keyword">COPY</span><span class="bash"> requirements.txt .</span>
<span class="hljs-keyword">RUN</span><span class="bash"> pip install --no-cache-dir -r requirements.txt</span>

<span class="hljs-comment"># Copiar código fuente</span>
<span class="hljs-keyword">COPY</span><span class="bash"> api/ ./api/</span>
<span class="hljs-keyword">COPY</span><span class="bash"> model/ ./model/</span>
<span class="hljs-keyword">COPY</span><span class="bash"> src/ ./src/</span>

<span class="hljs-comment"># Exponer puerto</span>
<span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">8000</span>

<span class="hljs-comment"># Health check</span>
<span class="hljs-keyword">HEALTHCHECK</span><span class="bash"> --interval=30s --timeout=3s \
  CMD curl -f http://localhost:8000/health || <span class="hljs-built_in">exit</span> 1</span>

<span class="hljs-comment"># Comando de inicio</span>
<span class="hljs-keyword">CMD</span><span class="bash"> [<span class="hljs-string">"uvicorn"</span>, <span class="hljs-string">"api.main:app"</span>, <span class="hljs-string">"--host"</span>, <span class="hljs-string">"0.0.0.0"</span>, <span class="hljs-string">"--port"</span>, <span class="hljs-string">"8000"</span>]</span>
</div></code></pre>
<h3 id="configuraci%C3%B3n-de-render">Configuración de Render</h3>
<p><strong>render.yaml:</strong></p>
<pre class="hljs"><code><div><span class="hljs-attr">services:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">web</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">superhero-power-predictor</span>
    <span class="hljs-attr">runtime:</span> <span class="hljs-string">docker</span>
    <span class="hljs-attr">dockerfilePath:</span> <span class="hljs-string">./deployments/Dockerfile</span>
    <span class="hljs-attr">dockerContext:</span> <span class="hljs-string">.</span>
    <span class="hljs-attr">env:</span> <span class="hljs-string">docker</span>
    <span class="hljs-attr">plan:</span> <span class="hljs-string">free</span>
    <span class="hljs-attr">region:</span> <span class="hljs-string">oregon</span>
    <span class="hljs-attr">branch:</span> <span class="hljs-string">main</span>
    
    <span class="hljs-comment"># Health checks</span>
    <span class="hljs-attr">healthCheckPath:</span> <span class="hljs-string">/health</span>
    
    <span class="hljs-comment"># Variables de entorno</span>
    <span class="hljs-attr">envVars:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">PORT</span>
        <span class="hljs-attr">value:</span> <span class="hljs-number">10000</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">PYTHONUNBUFFERED</span>
        <span class="hljs-attr">value:</span> <span class="hljs-number">1</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">LOG_LEVEL</span>
        <span class="hljs-attr">value:</span> <span class="hljs-string">info</span>
    
    <span class="hljs-comment"># Auto-deploy</span>
    <span class="hljs-attr">autoDeploy:</span> <span class="hljs-literal">true</span>
</div></code></pre>
<h3 id="validaci%C3%B3n-post-despliegue">Validación Post-Despliegue</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Script de validación</span>
<span class="hljs-meta">#!/bin/bash
</span>
BASE_URL=<span class="hljs-string">"https://your-app.onrender.com"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Testing health endpoint..."</span>
curl -f <span class="hljs-variable">$BASE_URL</span>/health || <span class="hljs-built_in">exit</span> 1

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Testing info endpoint..."</span>
curl -f <span class="hljs-variable">$BASE_URL</span>/info || <span class="hljs-built_in">exit</span> 1

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Testing prediction..."</span>
curl -X POST <span class="hljs-variable">$BASE_URL</span>/predict \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{
    "features": {
      "intelligence": 60, "strength": 80, "speed": 55,
      "durability": 70, "combat": 65,
      "height_cm": 185, "weight_kg": 90
    }
  }'</span> || <span class="hljs-built_in">exit</span> 1

<span class="hljs-built_in">echo</span> <span class="hljs-string">"All tests passed!"</span>
</div></code></pre>
<hr>
<h2 id="resultados-y-an%C3%A1lisis">Resultados y Análisis</h2>
<h3 id="m%C3%A9tricas-de-performance">Métricas de Performance</h3>
<table>
<thead>
<tr>
<th>Modelo</th>
<th>RMSE (BO)</th>
<th>RMSE (Random Search)</th>
<th>Mejora</th>
<th>Evaluaciones BO</th>
<th>Evaluaciones RS</th>
</tr>
</thead>
<tbody>
<tr>
<td>SVM</td>
<td>15.23</td>
<td>18.47</td>
<td>17.5%</td>
<td>7</td>
<td>12</td>
</tr>
<tr>
<td>Random Forest</td>
<td>12.89</td>
<td>15.31</td>
<td>15.8%</td>
<td>6</td>
<td>11</td>
</tr>
<tr>
<td>MLP</td>
<td>14.56</td>
<td>17.92</td>
<td>18.8%</td>
<td>8</td>
<td>13</td>
</tr>
</tbody>
</table>
<h3 id="interpretaci%C3%B3n">Interpretación</h3>
<ol>
<li><strong>Eficiencia:</strong> BO alcanza mejores resultados con ~45% menos evaluaciones</li>
<li><strong>Consistencia:</strong> BO converge de forma más predecible</li>
<li><strong>Mejor modelo:</strong> Random Forest optimizado con BO (RMSE = 12.89)</li>
</ol>
<h3 id="hiperpar%C3%A1metros-%C3%B3ptimos">Hiperparámetros Óptimos</h3>
<p><strong>Random Forest (ganador):</strong></p>
<ul>
<li><code>n_estimators</code>: 100</li>
<li><code>max_depth</code>: 6</li>
<li>Justificación: Balance entre complejidad y generalización</li>
</ul>
<p><strong>Por qué Random Forest ganó:</strong></p>
<ul>
<li>Robusto a outliers en datos de superhéroes</li>
<li>Captura interacciones no-lineales naturalmente</li>
<li>Menos sensible a la escala de features</li>
</ul>
<hr>
<h2 id="estructura-de-archivos-detallada">Estructura de Archivos Detallada</h2>
<pre class="hljs"><code><div>Practica10-ML-GitWars/
├── data/
│   ├── data.csv                 # Dataset limpio (600 registros)
│   └── README.md               # Documentación del dataset
│
├── src/
│   ├── Elemento0/
│   │   └── get_data.py         # Script de consumo de API
│   ├── orchestrator.py         # Evaluadores de modelos
│   ├── optimizer.py            # Implementación de BO
│   ├── random_search.py        # Baseline para comparación
│   ├── utils.py                # Funciones auxiliares
│   └── README.md              # Documentación de código
│
├── api/
│   ├── main.py                 # FastAPI application
│   ├── models.py               # Pydantic schemas
│   ├── preprocessing.py        # Preprocesamiento
│   ├── train_model.py          # Script de entrenamiento
│   ├── verify_build.py         # Verificación pre-build
│   └── README.md              # Documentación de API
│
├── model/
│   ├── model.pkl               # Modelo entrenado
│   ├── scaler.pkl              # StandardScaler fitted
│   └── metadata.json           # Info del modelo
│
├── deployments/
│   ├── Dockerfile              # Imagen Docker
│   ├── render.yaml             # Config de Render
│   ├── .dockerignore           # Archivos excluidos
│   └── README.md              # Guía de despliegue
│
├── notebooks/
│   ├── nb_equipo.ipynb         # Análisis completo
│   ├── exploratory.ipynb       # EDA
│   └── README.md              # Guía de notebooks
│
├── tests/
│   ├── test_api.py             # Tests de endpoints
│   ├── test_models.py          # Tests de modelos
│   └── test_optimizer.py       # Tests de BO
│
├── .github/
│   └── workflows/
│       └── deploy.yml          # CI/CD pipeline
│
├── requirements.txt            # Dependencias
├── Makefile                    # Automatización
├── README.md                   # Este archivo
├── .gitignore                  # Archivos ignorados
└── LICENSE                     # Licencia académica
</div></code></pre>
<hr>
<h2 id="tecnolog%C3%ADas-y-dependencias">Tecnologías y Dependencias</h2>
<h3 id="core-ml-stack">Core ML Stack</h3>
<ul>
<li><strong>NumPy</strong> 1.24.0: Operaciones numéricas, álgebra lineal</li>
<li><strong>Pandas</strong> 2.0.0: Manipulación de datos</li>
<li><strong>scikit-learn</strong> 1.3.0: Modelos ML, métricas, preprocessing</li>
</ul>
<h3 id="optimizaci%C3%B3n">Optimización</h3>
<ul>
<li><strong>SciPy</strong> 1.10.0: Álgebra lineal avanzada (np.linalg.solve)</li>
<li>Implementación manual de GP y UCB (sin librerías de BO)</li>
</ul>
<h3 id="api-y-deployment">API y Deployment</h3>
<ul>
<li><strong>FastAPI</strong> 0.104.0: Framework web moderno</li>
<li><strong>Uvicorn</strong> 0.24.0: ASGI server</li>
<li><strong>Pydantic</strong> 2.0.0: Validación de datos</li>
<li><strong>Docker</strong>: Containerización</li>
<li><strong>Render</strong>: Platform-as-a-Service</li>
</ul>
<h3 id="visualizaci%C3%B3n">Visualización</h3>
<ul>
<li><strong>Matplotlib</strong> 3.7.0: Gráficas científicas</li>
<li><strong>Seaborn</strong> 0.12.0: Visualizaciones estadísticas</li>
</ul>
<h3 id="desarrollo">Desarrollo</h3>
<ul>
<li><strong>Jupyter</strong> 1.0.0: Notebooks interactivos</li>
<li><strong>pytest</strong> 7.4.0: Testing framework</li>
<li><strong>black</strong>: Code formatter</li>
<li><strong>flake8</strong>: Linter</li>
</ul>
<hr>
<h2 id="licencia">Licencia</h2>

</body>

</html>